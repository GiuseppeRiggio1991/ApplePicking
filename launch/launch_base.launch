<launch>
    <!-- Launches some of the base utils needed to get the planner to run -->
    <arg name="sim" default="true" />
    <arg name="ip" default="127.0.0.1" />
    <arg name="robot" default="ur5" />
    <arg name="use_camera" default="false" />
    <arg name="debug" default="$(arg sim)" />
    <arg name="mount" default="floor" />
    <arg name="global_camera_cloud" default="" />
    <arg name="global_camera_frame" default="global_camera" />
    <arg name="inhand_camera_cloud" default="" />
    <arg name="inhand_camera_frame" default="inhand_camera" />
    <arg name="base_frame" default="world" />

    <param name="use_camera" value="$(arg use_camera)" />
    <param name="robot_ip" value="$(arg ip)" />
    <param name="tool_speed" value="0.160" />
    <param name="debug" value="$(arg debug)" />
    <param name="base_frame" value="$(arg base_frame)" />
    <param name="inhand_camera_cloud" value="$(arg inhand_camera_cloud)" />
    <param name="inhand_camera_frame" value="$(arg inhand_camera_frame)" />
    <param name="global_camera_cloud" value="$(arg global_camera_cloud)" />
    <param name="global_camera_frame" value="$(arg global_camera_frame)" />

    <param name="/segment_color" value="" />

    <group unless="$(arg sim)">
        <include file="$(find ur_robot_driver)/launch/ur5e_bringup.launch">
            <arg name="robot_ip" value="$(arg ip)" />
        </include>
        <include file="$(find localisation)/launch/localisation.launch">
            <arg name="robot_name" value="$(arg robot)" />
        </include>
    </group>
    <group if="$(arg sim)">
        <include file="$(find localisation)/launch/localisation_sim.launch">
            <arg name="robot_name" value="$(arg robot)" />
            <arg name="use_camera" value="$(arg use_camera)" />
        </include>
    </group>
    <group if="$(arg use_camera)">
<!--         <include file="$(find sawyer_planner)/launch/pcl_filter_nodelet.launch" /> -->
<!--         <node name="background_detector" pkg="sawyer_planner" type="background_detector.py" /> -->
<!--         <node name="point_tracker" pkg="sawyer_planner" type="point_tracker.py" unless="$(arg sim)" output="screen" /> -->
        <node name="branch_orientation" pkg="sawyer_planner" type="branch_orientation.py" />
<!--         <node type="rviz" name="rviz" pkg="rviz" args="-d $(find sawyer_planner)/include/cloud_display.rviz" /> -->


    </group>

    <node name="cutpoint_loc_publisher" pkg="tf" type="static_transform_publisher" args="0 0 0 0 0 0 1 manipulator cutpoint 10" />
<!--     <node name="ur_mode_manager" pkg="sawyer_planner" type="ur_mode_manager.py" /> -->
</launch>